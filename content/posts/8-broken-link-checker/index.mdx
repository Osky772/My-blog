---
title: Broken Link Checker - znajd藕 popsute linki na stronie
date: 2021-04-22
tags:
  - npm
---

import { jsx, Link as TLink } from "theme-ui"
import Image from '../../../src/components/Image.tsx';
import ExternalPostLink from '../../../src/components/ExternalPostLink.tsx';

Z pewnoci nie chciaby, aby na twojej stronie byy jakie linki kt贸re prowadz do strony, kt贸ra nieistnieje lub zwyczajnie nie dziaaj z jakiego innego powodu (niezale偶nego od ciebie).

<Image src="./404-error.jpeg"/>

W przypadku maej strony mo偶na rcznie sprawdzi, czy wszystkie linki prowadz gdzie trzeba, ale na wikszych stronach to ju偶 nie bdzie takie szybkie. Poza tym, jako programici powinnimy automatyzowa powtarzalne czynnoci . I wanie o automatyzacji bdzie ten wpis!

U偶yjemy bardzo fajnej biblioteki do sprawdzania popsutych link贸w, a jest to <ExternalPostLink name="broken-link-checker" url="https://github.com/stevenvachon/broken-link-checker"/>. 

Bibliotek mo偶emy u偶ywa na dwa sposoby: w wierszu polece oraz w kodzie poprzez API. Zaprezentuj obie opcje.

### Spis treci
- [U偶ycie w wierszu polece](#U偶ycie-w-wierszu-polece)

> **Instalacja:** Musimy mie <ExternalPostLink name="zainstalowany NPM" url="https://www.npmjs.com/get-npm"/> oraz Node w wersji wiekszej lub r贸wnej 14.

### U偶ycie w wierszu polece

W celu u偶ycia biblioteki w wierzu polece, zainstalujmy j globalnie:

```shell
npm install broken-link-checker -g
```

Sprawd藕 dostpne opcje:
```shell
blc --help
```

Typowe u偶ycie w celu przeskanowania caej strony mo偶e wyglda nastpujco:

```shell
# -r skanuje rekurencyjnie ca stron, czyli r贸wnie偶 wszystkie podstrony
# -o zachowuje kolejno link贸w w jakiej pojawiaj si na stronie
blc https://www.oskarkowalow.pl -ro
```

Powy偶szy skrypt uruchomi skanowanie wybranej strony. Tak wyglda kawaek skanowania mojej strony:

<Image src="./blc-scanning.png"/>

Wynik skanowania jest bardzo czytelny i wiadomo, kt贸re linki dziaaj a kt贸re nie. U mnie tak wyglda wynik zakoczenia skanowania:

```
Finished! 682 links found. 578 excluded. 18 broken.
Elapsed time: 49 seconds
```

Moja strona jest jeszcze do maa i skanowanie wszystkich podstron nie byo zbyt czasochonne.

Wida jednak, 偶e linki prowadzce do Linkedin wyrzucaj bd. To zachowanie jest nie do ominicia i linki prowadzce do Linkedin zawsze bd zwraca ten bd.

#### Pomijanie link贸w

Mo偶emy pomija skanowanie wybranych link贸w, aby przyspieszy skanowanie lub pozby si link贸w, kt贸re zawsze zwracaj bd

- `--exclude-external` lub `-e` spowoduje pominicie wszystkich link贸w do zewntrznych serwis贸w,
- `--exclude-internal` lub `-i` spowoduje pominicie wszystkich wewntrznych link贸w, a wic bdzie sprawdza tylko zewntrzne linki,
- `--exclude` pozwala na powinjanie r贸偶nych cie偶ek i wybranych link贸w.

Tak mo偶e wyglda pominicie link贸w do Linkedin oraz podstorny "blog/kategorie":
```shell
blc https://www.oskarkowalow.pl -ro \
--exclude linkedin \
--exclude /blog/kategorie
```

#### Skanowanie tylko jednej strony

Czasem skanowanie wszystkich podstron mo偶e by bardzo czaschonne, szczeg贸lnie je偶eli mamy bardzo du偶y serwis do sprawdzenia. W takim wypadku wystarczy odjc flag `-r`:

```shell
blc https://www.oskarkowalow.pl -o
```

### U偶ycie w kodzie

<!-- ### Instalacja lokalnie

Wystarczy odpali komend:

```shell
# instalujemy jako devdependencj, gdy偶 jest potrzebna tylko podczas developmentu
npm install --save-dev broken-link-checker
``` -->

